package com.nos.home.module.menu.entity;

import com.nos.home.entity.account.AccountEntity;
import jakarta.persistence.*;
import lombok.Getter;
import lombok.Setter;
import org.springframework.data.annotation.CreatedDate;
import org.springframework.data.annotation.LastModifiedDate;

import java.time.LocalDateTime;
import java.util.HashSet;
import java.util.Set;

@Getter
@Setter
//@Entity
@Table(name = "TB_MENU")
public class MenuEntity {
    //------------------------------------------------------------------------------------------------------------------
    // 메뉴 아이템 Sequence 번호
    //------------------------------------------------------------------------------------------------------------------
    @Id
    private Long                        menuSeq;

    //------------------------------------------------------------------------------------------------------------------
    // 사이트맵 정보
    //------------------------------------------------------------------------------------------------------------------
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "sitemap_seq", nullable = false)
    private SiteMapEntity               sitemap;

    //------------------------------------------------------------------------------------------------------------------
    // 상위 메뉴 정보
    //------------------------------------------------------------------------------------------------------------------
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "parent_menu_seq")
    private MenuEntity                  parentMenu;

    //------------------------------------------------------------------------------------------------------------------
    // 하위 메뉴 정보
    //------------------------------------------------------------------------------------------------------------------
    @OneToMany(mappedBy = "parentMenu")
    private Set<MenuEntity>             childMenus = new HashSet<>();

    //------------------------------------------------------------------------------------------------------------------
    // 메뉴명
    //------------------------------------------------------------------------------------------------------------------
    @Column(nullable = false, length = 100)
    private String                      title;

    //------------------------------------------------------------------------------------------------------------------
    // 메뉴 URL
    //------------------------------------------------------------------------------------------------------------------
    @Column(length = 500)
    private String                      url;

    //------------------------------------------------------------------------------------------------------------------
    // Target
    //------------------------------------------------------------------------------------------------------------------
    @Column(length = 30)
    private String                      target;

    //------------------------------------------------------------------------------------------------------------------
    // 메뉴 설명
    //------------------------------------------------------------------------------------------------------------------
    @Column(length = 500)
    private String                      description;

    //------------------------------------------------------------------------------------------------------------------
    // 메뉴 유형
    //------------------------------------------------------------------------------------------------------------------
    @Column(length = 50)
    private String                      moduleType;

    //------------------------------------------------------------------------------------------------------------------
    // 메뉴 아이콘
    //------------------------------------------------------------------------------------------------------------------
    @Column(length = 100)
    private String                      icon;

    //------------------------------------------------------------------------------------------------------------------
    // 메뉴 수준
    //------------------------------------------------------------------------------------------------------------------
    @Column(nullable = false)
    private Integer                     depth = 1;

    //------------------------------------------------------------------------------------------------------------------
    // 메뉴 순서
    //------------------------------------------------------------------------------------------------------------------
    @Column(nullable = false)
    private Integer                     position = 0;

    //------------------------------------------------------------------------------------------------------------------
    // 메뉴 활성화 여부
    //------------------------------------------------------------------------------------------------------------------
    private Boolean                     enabled = true;

    @CreatedDate
    private LocalDateTime               createdAt;

    @LastModifiedDate
    private LocalDateTime               updatedAt;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "created_by")
    private AccountEntity               createdBy;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "updated_by")
    private AccountEntity               updatedBy;
}